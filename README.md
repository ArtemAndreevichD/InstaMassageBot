# InstaMassageBot

## Задача

Реализовать сервис, который поможет администрутору салона взаимодействовать с пользователем.

## План решения задачи

1) **Предобработка и кластеризация данных**
2) **Создание базы данных**
3) **Выбор и обучение модели на нейронных сетях**
4) **Создание сервиса и подключение к Google Sheets**
4) **Обертывание в Docker и запуск на ВМ Yandex**
   

## Решение задачи

### Предобрабатка и кластаризация данных
Данные были преобразованы из формата JSON в TXT, очищены от дополнительной информации и затем преобразованы в формат CSV. Далее, с использованием алгоритма BERTopic, данные были разделены на кластеры, которые выделяли топ-100 наиболее популярных вопросов пользователей.
### Создание базы данных
Для создания базы данных использовался Google Sheets, в котором вручную создавался датасет, состоящий из 100 вопросов и ответов.
### Выбор и обучение модели на нейронных сетях
В качестве модели для обучения была выбрана модель MS Marco (SentenceTransformers).
### Создание сервиса и подключение к Google Sheets 
Для создания сервиса был использован телеграм-бот @InstaMassageBot с использованием библиотеки aiogram. Кроме того, было осуществлено подключение телеграм-бота к Google Sheets с помощью API, что позволяет боту обращаться к таблице занятости и показывать пользователям актуальную информацию.
### Обертывание в Docker и запуск на ВМ Yandex
Для более удобного развертывания и масштабирования сервиса было принято решение контейнеризировать его с помощью Docker и запустить на ВМ Yandex
## Принцип работы сервиса
- Пользователь запускает сервис и задает интересующий его вопрос;
- Сообщение проходит проверку на соответствие формата (изображение или текст);
- Если пользователь задает вопрос об информации о массаже:
  - Вопрос решается в модели MS Marco, которая с помощью косинусного сходства определяет наиболее подходящее сообщение из базы данных;
  - Ответом клиенту является наиболее подходящее предложение на основе моделей баз данных;
- Если пользователь спрашивает о записи:
  - Бот запрашивает у пользователя день и адрес салона, который его интересует;
  - Обращается к Google Sheets с помощью API и, следовательно, наличия временных окон.


